!function(){var e,o,n={jquery:function(e){"use strict";e.exports=jQuery}},r={};e=function e(o){var t=r[o];if(void 0!==t)return t.exports;var i=r[o]={exports:{}};return n[o](i,i.exports,e),i.exports}("jquery"),o={open:function(o,n){referrer=n?"?referrer="+encodeURIComponent(n):"?referrer="+window.location.href;var r="",t="";r="用户登录",t="https://accounts.douban.com/passport/login_popup?source=movie";var i=document.location.protocol+"//"+document.location.hostname,a=dui.Dialog({width:340,title:r,height:448,cls:"account_pop",isHideTitle:!0,modal:!0,content:"<iframe scrolling='no' frameborder='0' width='340' height='448' src='"+t+"' name='"+i+"'></iframe>"},!0),c=a.node;if(c.undelegate(),c.delegate(".dui-dialog-close","click",function(){var o=e("body");o.find("#login_msk").hide(),o.find(".account_pop").remove()}),478>e(window).width()){var u="";"reg"===o?u=HTTPS_DB+"/accounts/register"+referrer:"login"===o&&(u=HTTPS_DB+"/accounts/login"+referrer),window.location.href=u}else a.open();e(window).bind("message",function(e){"https://accounts.douban.com"===e.originalEvent.origin&&(c.find("iframe").css("height",e.originalEvent.data),c.height(e.originalEvent.data),a.update())})}},Douban&&Douban.init_show_login&&(Douban.init_show_login=function(n){var r=e(n);r.click(function(){var e=r.data("ref")||"";return o.open("login",e),!1})}),e(function(){e("body").delegate(".pop_register","click",function(n){n.preventDefault();var r=e(this).data("ref")||"";return o.open("reg",r),!1}),e("body").delegate(".pop_login","click",function(n){n.preventDefault();var r=e(this).data("ref")||"";return o.open("login",r),!1})})}();